<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>NLABS — DNA Generator 9.5 (Base Sepolia) — Patch B</title>
<style>
  :root{ --win-bg:#008080; --win-panel:#c0c0c0; --win-blue:#000080; }
  html,body{margin:0;padding:0}
  body{
    background:var(--win-bg);
    font-family:'MS Sans Serif', Tahoma, Arial, sans-serif;
    display:flex;justify-content:center;min-height:100vh
  }
  .desktop{width:min(900px,98vw);margin:14px}
  .window{background:var(--win-panel);border:2px solid #fff;box-shadow:2px 2px 0 #000}
  .title-bar{background:var(--win-blue);color:#fff;font-weight:bold;padding:4px 8px;
             display:flex;align-items:center;justify-content:space-between}
  .title-right{display:flex;gap:6px}
  .title-btn{width:16px;height:16px;background:#c0c0c0;color:#000;border:1px solid #fff;
             text-align:center;line-height:14px;font-size:12px}
  .content{background:#fff;border:2px inset #c0c0c0;padding:10px}
  .tabs{display:flex;gap:6px;margin-bottom:8px;flex-wrap:wrap}
  .tab{padding:4px 10px;background:#c0c0c0;border:2px outset #fff;cursor:pointer;font-size:14px}
  .tab.active{border:2px inset #fff;background:#ddd}
  .pane{display:none}
  .pane.active{display:block}
  .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-bottom:6px}
  select,input[type=text]{background:#fff;border:2px inset #fff;padding:4px;font-size:14px}
  select{min-width:210px}
  input[type=text]{width:110px}
  button{padding:4px 10px;background:#c0c0c0;border:2px outset #fff;cursor:pointer;font-size:14px}
  button:active{border:2px inset #fff}
  button:disabled{color:#777;cursor:not-allowed;border:2px inset #fff}
  input[type=range]{min-width:140px}
  .hint{font-size:12px;color:#000080;margin:6px 0}
  .badge{font-size:12px;background:#ececec;border:1px solid #999;padding:2px 6px}
  canvas{
    display:block;
    border:2px solid #000;
    background:#eee;
    margin:8px 0;
    /* Fix gegen Überlaufen */
    max-width:100%;
    height:auto;
  }
  .status{font-size:12px;margin-top:4px;word-break:break-all}
  .coming{padding:18px;background:#efefef;border:2px inset #c0c0c0}
  .footer{font-size:11px;color:#222;margin-top:6px;opacity:.9}
  @media (max-width:560px){
    .row > *{flex:1 1 auto}
    select{min-width:unset}
  }
</style>
</head>
<body>
<div class="desktop">
  <div class="window">
    <div class="title-bar">
      <div>NLABS — DNA Suite</div>
      <div class="title-right">
        <button id="connectBtn" class="title-btn" title="Connect">◎</button>
        <div class="title-btn">□</div>
        <div class="title-btn">X</div>
      </div>
    </div>
    <div class="content">
      <div class="tabs">
        <div class="tab active" data-pane="mint">Mint</div>
        <div class="tab" data-pane="gallery">Gallery</div>
        <div class="tab" data-pane="artists">Artists</div>
        <div class="tab" data-pane="about">About</div>
      </div>

      <div id="pane-mint" class="pane active">
        <div class="row">
          <select id="collectionSelect" title="Choose a collection">
            <option value="boredapeyachtclub|0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d">Bored Ape Yacht Club (BAYC)</option>
            <option value="mutant-ape-yacht-club|0x60e4d786628fea6478f785a6d7e704777c86a7c6">Mutant Ape Yacht Club (MAYC)</option>
            <option value="azuki|0xed5af388653567af2f388e6224dc7c4b3241c544">Azuki</option>
            <option value="doodles-official|0x8a90cab2b38dba80c64b7734e58ee1db38b8992e">Doodles</option>
            <option value="chimpers|0x80336ad7a747236ef41f47ed2c7641828a480baa">Chimpers</option>
            <option value="proof-moonbirds|0x23581767a106ae21c074b2276d25e5c3e136a68b">Moonbirds</option>
            <option value="pudgypenguins|0xbd3531da5cf5857e7cfaa92426877b022e612cf8">Pudgy Penguins</option>
            <option value="cryptopunks|0xb47e3cd837ddf8e4c57f05d70ab865de6e193bbb">CryptoPunks</option>
            <option value="mocaverse|0x59325733eb952a92e069c87f0a6168b29e80627f">Mocaverse</option>
            <option value="mfers|0x79fcdef22feed20eddacbb2587640e45491b757f">MFers</option>
          </select>
          <input id="tokenIdInput" type="text" placeholder="Token ID" />
          <button id="loadBtn">Load NFT</button>
          <span id="nftBadge" class="badge">No NFT loaded</span>
        </div>

        <div class="row">
          <label>Mutation <input id="mutationRange" type="range" min="1" max="10" value="5"/></label>
          <label>Gene Flow <input id="flowRange" type="range" min="1" max="10" value="6"/></label>
        </div>

        <div class="row">
          <button id="generateBtn" disabled>Generate</button>
          <button id="mintBtn" disabled>Mint on Base Sepolia</button>
        </div>

        <div class="hint">
          We read your NFT’s dominant colors, set a subtle pastel background from that hue, then grow layered geometric fragments along organic flow paths. Mutation controls fragment count/size; Gene Flow bends the paths.
        </div>

        <canvas id="canvas" width="600" height="600"></canvas>
        <div id="statusText" class="status">Select a collection and enter a Token ID, then click “Load NFT”.</div>
        <div class="footer">Chain: Base Sepolia (84532) • Contract: 0x21CFEFfe59d808d9a2D66f8e35bDDb125c491dd6</div>
      </div>

      <div id="pane-gallery" class="pane">
        <div class="coming"><b>Gallery</b><br/><i>Coming soon…</i></div>
      </div>

      <div id="pane-artists" class="pane">
        <div class="coming"><b>Artists</b><br/><i>Coming soon…</i></div>
      </div>

      <div id="pane-about" class="pane">
        <p><b>NLABS — DNA Suite</b> turns any NFT into a generative “DNA artwork”. Your original’s color genetics guide shapes and flow; outputs are minted on Base.</p>
        <ul style="margin-top:8px">
          <li>Background = pastelized dominant color of the source NFT</li>
          <li><b>Mutation</b> = density & scale of fragments</li>
          <li><b>Gene Flow</b> = number of organic paths</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<script type="module">
import { ethers } from "https://cdn.jsdelivr.net/npm/ethers@6.11.1/dist/ethers.min.js";

/* ===================== CONFIG ===================== */
const CONTRACT_ADDRESS = "0x21CFEFfe59d808d9a2D66f8e35bDDb125c491dd6";
const BASE_SEPOLIA_CHAIN_ID = 84532;
const MINT_PRICE_ETH = "0.0"; // ändere auf z. B. "0.01", falls kostenpflichtig
const UPLOAD_MODE = "server";
const WEB3_STORAGE_TOKEN = ""; // nur nötig, wenn UPLOAD_MODE="client"

// ... (restlicher Script bleibt wie in deiner Version; kein Design geändert)

</script>
</body>
</html>
